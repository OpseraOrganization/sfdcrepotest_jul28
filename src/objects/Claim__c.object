<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <validationRules>
        <fullName>Allowable_claims</fullName>
        <active>true</active>
        <errorConditionFormula>AND( ISCHANGED(Claim_Status__c), 
ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Escalated&quot; )
				|| ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Created&quot;)
				|| ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Rejected&quot;)
				|| ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Expired&quot;)
				|| ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Reimbursed&quot;)
				 || ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;HFLOF&quot;)
				|| ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Awaiting Reimbursement&quot;)
				|| ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Cancelled&quot;),
				ISPICKVAL(Claim_Status__c, &quot;Submitted&quot;)
	)</errorConditionFormula>
        <errorMessage>Only Claimable and incomplete Claims are allowed for submission.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Avoid_to_Resubmission_of_claim</fullName>
        <active>true</active>
        <errorConditionFormula>AND( ISCHANGED(Claim_Status__c)||
ISCHANGED(Activity_Claim_Amount__c), 
ISPICKVAL(PRIORVALUE(Claim_Status__c),&quot;Submitted&quot;), 
ISPICKVAL(Claim_Status__c, &quot;Submitted&quot;)	)</errorConditionFormula>
        <errorMessage>Claim is already submitted.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>PoP_Checkbox_mandatory_on_Submit</fullName>
        <active>true</active>
        <errorConditionFormula>AND(
			ISPICKVAL(Claim_Status__c, &apos;Submitted&apos;),
			NOT(ISPICKVAL(I_have_uploaded_all_proof_of_performance__c, &apos;Yes&apos;)),
			NOT( 
			OR( 
			$Profile.Name = &apos;System Administrator&apos;, 
			$Profile.Name = &apos;Data Loader Profile&apos;, 
			$Profile.Name = &apos;Nokia Admin Profile&apos;, 
			$Profile.Name = &apos;Global Process Admin Profile&apos;	
			) 
			)
			)</errorConditionFormula>
        <errorMessage>Please acknowledge that you have uploaded all relevant proof of performance documents on the claim related tab
AND
that you have entered invoice line items that equal your claim amount on the invoice manager tab to avoid delays in auditing.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>PoP_Validate_Claim_Amount</fullName>
        <active>true</active>
        <description>Validates claim amount with the sum of all invoices total amount</description>
        <errorConditionFormula>AND(
			ISPICKVAL(Claim_Status__c, &apos;Submitted&apos;),
			(Activity_Claim_Amount__c &lt;&gt; claim_total_reimbursable_amount__c),
			ISPICKVAL(I_have_uploaded_all_proof_of_performance__c, &apos;Yes&apos;)
			)</errorConditionFormula>
        <errorMessage>The total of ALL Invoice Reimbursable Amounts should EQUAL the CLAIM AMOUNT</errorMessage>
    </validationRules>
</CustomObject>
