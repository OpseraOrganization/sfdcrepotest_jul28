<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <validationRules>
        <fullName>CH_MEManagerCanEditOnly</fullName>
        <active>true</active>
        <description>SC 21567</description>
        <errorConditionFormula>AND(
AND($User.Id &lt;&gt; CH_EscalationManagerLevel1__c,
$User.Id &lt;&gt; CH_EscalationManagerLevel2__c,
$User.Id &lt;&gt; CH_EscalationManagerLevel3__c
), NOT(ISNEW()),
OR( 

ISCHANGED(CH_EscalationDomain__c),
ISCHANGED(CH_EscalationEntryCriteria__c),
ISCHANGED(CH_TopIssue__c),
ISCHANGED(CH_QCE__c),
ISCHANGED(CH_IssueStatement__c),
ISCHANGED(CH_EscalationDescription__c),
ISCHANGED(CH_CustomerTone__c),
ISCHANGED(CH_FinancialRisk__c),
ISCHANGED(CH_CustomerNetworkImpact__c),
ISCHANGED(CH_LevelofEscalation__c),
ISCHANGED(CH_ImpactedOrganization__c),
ISCHANGED(CH_EscalationTrend__c),
ISCHANGED(CH_NokiaBusinessImpact__c),
ISCHANGED(CH_EscalationPlan__c),
ISCHANGED(CH_EscalationActionNextSteps__c),
ISCHANGED(CH_EscalationActionHistory__c),
ISCHANGED(CH_ExecutiveSummary__c),
ISCHANGED(CH_EscalationLevelSetTime__c),
ISCHANGED(CH_EscalationEndDate__c),
ISCHANGED(CH_EscalationRejectionDate__c),
ISCHANGED(CH_EscalationExitCriteria__c),
ISCHANGED(CH_Corrective_Preventive_Action__c),
ISCHANGED(CH_ExitCriteriaReached__c),
ISCHANGED(CH_RejectionCause__c),
ISCHANGED(CH_EscalationManagerLevel2__c),
ISCHANGED(CH_EscalationManagerLevel3__c)
)
)</errorConditionFormula>
        <errorDisplayField>CH_AccountName__c</errorDisplayField>
        <errorMessage>You are not authorized to Perform the actions.Only Manager Can Edit the details.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_ME_ExitCriteriaReached_Closed</fullName>
        <active>true</active>
        <description>the ‘exit criteria reached’ field should be filled otherwise an error message is displayed  if the status is put ‘Closed’ without this field filled</description>
        <errorConditionFormula>AND(
 ISBLANK(CH_ExitCriteriaReached__c),
	 ISPICKVAL(CH_EscalationStatus__c, &quot;Closed&quot;) 
)</errorConditionFormula>
        <errorDisplayField>CH_ExitCriteriaReached__c</errorDisplayField>
        <errorMessage>Exit Criteria Reached field should be filled</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_ME_OnlyManagerCanCloseEscalation</fullName>
        <active>true</active>
        <description>As Escalation manager  I need to be able to close a escalation</description>
        <errorConditionFormula>AND(AND($User.Id &lt;&gt; CH_EscalationManagerLevel1__r.Id,
	   $User.Id &lt;&gt; CH_EscalationManagerLevel2__r.Id,
	   $User.Id &lt;&gt; CH_EscalationManagerLevel3__r.Id
	   ),
	   ISPICKVAL(CH_EscalationStatus__c, &quot;Closed&quot;)
	   )</errorConditionFormula>
        <errorDisplayField>CH_EscalationStatus__c</errorDisplayField>
        <errorMessage>You are not allowed to close an escalation as you are not Escalation Manager</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_VR_Manage_Esc_EndDt_Criteria</fullName>
        <active>false</active>
        <errorConditionFormula>AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Close&apos;),
				ISPICKVAL(CH_EscalationStatus__c, &apos;Closed&apos;),
				ISBLANK(CH_ExitCriteriaReached__c))
				||
AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Close&apos;),
				ISPICKVAL(CH_EscalationStatus__c, &apos;Closed&apos;),
				ISBLANK(CH_EscalationEndDate__c))</errorConditionFormula>
        <errorMessage>Please enter Exit Criteria Reached /  Escalation End Date</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_VR_Manage_Esc_Level_Set_Time</fullName>
        <active>false</active>
        <errorConditionFormula>AND(ISPICKVAL(CH_EscalationStatus__c, &apos;In-Progress&apos;),
				ISPICKVAL(CH_EscalationProcessStage__c, &apos;Identify&apos;),
				ISBLANK(CH_EscalationLevelSetTime__c))</errorConditionFormula>
        <errorDisplayField>CH_AccountName__c</errorDisplayField>
        <errorMessage>Please enter Escalation Level Set Time</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_VR_Manage_Esc_M_Activate</fullName>
        <active>false</active>
        <description>Set Mandetory when Stage is Activate</description>
        <errorConditionFormula>AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Activate&apos;),				
				 ISBLANK(CH_EscalationPartner__c)
				)</errorConditionFormula>
        <errorDisplayField>CH_EscalationPartner__c</errorDisplayField>
        <errorMessage>Please enter Required Feild</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_VR_Manage_Esc_M_Follow</fullName>
        <active>false</active>
        <description>Set Mandetory when Stage is Follow</description>
        <errorConditionFormula>AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Follow&apos;),				
			(LEN(CH_EscalationPlan__c)==0
				||
				ISPICKVAL(CH_EscalationTrend__c,&quot;&quot;)||
				NOT(CH_QCE__c)
					))</errorConditionFormula>
        <errorMessage>Please enter Required Escalation Plan /  Escalation Trend / QCE</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_VR_Manage_Esc_M_Identify</fullName>
        <active>false</active>
        <description>Set Mandetory when Stage is Identify</description>
        <errorConditionFormula>AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Identify&apos;),				
				 OR(ISBLANK(CH_EscalationRequester__c),
								ISBLANK(CH_EscalationManagerLevel1__c),
								ISPICKVAL(CH_EscalationSource__c,&quot;&quot;),
							ISBLANK(CH_EscalationDescription__c),
							ISPICKVAL(CH_EscalationDomain__c,&quot;&quot;),
							ISBLANK(CH_EscalationEntryCriteria__c),
		     ISPICKVAL(CH_CustomerTone__c,&quot;&quot;),
							ISBLANK(CH_AccountName__c),
							ISBLANK(CH_Product__c)
							) 
				)</errorConditionFormula>
        <errorMessage>Please enter Required Escalation Requester / Escalation Manager level1 /  Escalation Source / Escalation Description / ME domain / Escalation Entry criteria /  Customer Tone / Account name / Product</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_VR_Manage_Esc_Rejection</fullName>
        <active>false</active>
        <errorConditionFormula>(AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Identify&apos;),
ISPICKVAL(CH_EscalationStatus__c,&apos;Rejected&apos;),
ISBLANK(CH_RejectionCause__c)))
||
(AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Identify&apos;),
ISPICKVAL(CH_EscalationStatus__c,&apos;Rejected&apos;),
ISBLANK(CH_EscalationRejectionDate__c)))</errorConditionFormula>
        <errorMessage>Please enter the Rejection Cause / Rejection Date</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CH_VR_Manage_Esc_Start_date</fullName>
        <active>false</active>
        <errorConditionFormula>AND(ISPICKVAL(CH_EscalationProcessStage__c, &apos;Identify&apos;),
				ISPICKVAL(CH_EscalationStatus__c, &apos;Requested&apos;),
				ISBLANK(CH_EscalationStartDate__c))</errorConditionFormula>
        <errorDisplayField>CH_EscalationStartDate__c</errorDisplayField>
        <errorMessage>Please provide Escalation Start Date</errorMessage>
    </validationRules>
</CustomObject>
