<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <validationRules>
        <fullName>PRM_BG_Amount_Check</fullName>
        <active>true</active>
        <description>SFPRM-453</description>
        <errorConditionFormula>AND(
    ISNEW(),
				OR(
        PRM_A_A_Vital_Amount__c &gt; Transfer_From_Co_op__r.A_A_VITAL_Allocation__c,
  				  PRM_FN_Amount__c &gt; Transfer_From_Co_op__r.FN_Allocation__c,
        PRM_ION_Amount__c &gt; Transfer_From_Co_op__r.ION_Allocation__c,
        PRM_ION_NUAGE_Amount__c &gt; Transfer_From_Co_op__r.ION_NUAGE_Allocation__c, 
								PRM_ION_OPTICS_Amount__c &gt; Transfer_From_Co_op__r.ION_OPTICS_Allocation__c,
        PRM_ION_Routing_Amount__c &gt; Transfer_From_Co_op__r.ION_Routing_Allocation__c,
        PRM_MN_Amount__c &gt; Transfer_From_Co_op__r.MN_Allocation__c
							),
		OR(
		  NOT(CONTAINS(Description__c, &apos;Automated Transfer&apos;)),
		  ISBLANK(Description__c))
)</errorConditionFormula>
        <errorMessage>You can&apos;t transfer more than what is available in the Allocation for each BG.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>PRM_BG_Amount_Sum</fullName>
        <active>true</active>
        <description>SFPRM-453</description>
        <errorConditionFormula>AND(
				Co_op_Allocation_Transferred_Amount__c != 
   	( PRM_A_A_Vital_Amount__c + PRM_FN_Amount__c + PRM_ION_Amount__c +
		  PRM_ION_NUAGE_Amount__c + PRM_ION_OPTICS_Amount__c +
	  	PRM_ION_Routing_Amount__c + PRM_MN_Amount__c ),
		  NOT(CONTAINS(Description__c, &apos;Automated Transfer&apos;))
)</errorConditionFormula>
        <errorDisplayField>Co_op_Allocation_Transferred_Amount__c</errorDisplayField>
        <errorMessage>Transferred Amount must equal the sum of BG Amounts.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Transfer_amount_can_not_exceed_balance</fullName>
        <active>true</active>
        <errorConditionFormula>AND(
    ISNEW(),
    Co_op_Allocation_Transferred_Amount__c &gt;  Transfer_From_Co_op__r.Allocation_Period_Balance__c,
		  NOT(CONTAINS(Description__c, &apos;Automated Transfer&apos;))
)</errorConditionFormula>
        <errorMessage>You do not have sufficient balance to transfer the amount. Please check Co-op Allocation &quot;Allocation Period Balance&quot;.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Transfer_should_be_only_in_same_period</fullName>
        <active>false</active>
        <errorConditionFormula>AND(
ISNEW(),
OR(
(TEXT(Transfer_From_Co_op__r.Allocation_Month__c) !=  TEXT(Transfer_To_Co_op__r.Allocation_Month__c)),
(TEXT(Transfer_From_Co_op__r.Allocation_Year__c) !=  TEXT(Transfer_To_Co_op__r.Allocation_Year__c))
)
)</errorConditionFormula>
        <errorMessage>Transfers can only come out of and into the same allocation period. Please select same Period in Transfer To and Transfer From.</errorMessage>
    </validationRules>
</CustomObject>
